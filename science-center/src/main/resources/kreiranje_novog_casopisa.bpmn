<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_0aqu6ur" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.4.1">
  <bpmn:process id="adding_new_magazine" name="Kreiranje novog časopisa" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1" camunda:initiator="process_initiator">
      <bpmn:outgoing>SequenceFlow_0et583m</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0et583m" sourceRef="StartEvent_1" targetRef="Task_1ia85e0" />
    <bpmn:sequenceFlow id="SequenceFlow_19292vz" sourceRef="Task_1ia85e0" targetRef="Task_0ged9ns" />
    <bpmn:userTask id="Task_1ia85e0" name="Unos osnovnih informacija o časopisu" camunda:assignee="${process_initiator}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="form_name" label="Name" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="form_issn" label="ISSN" type="string">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="form_payment" label="Payment type" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
            <camunda:value id="readers" name="readers" />
            <camunda:value id="authors" name="authors" />
          </camunda:formField>
          <camunda:formField id="form_scientific_area" label="Scientific areas" type="enum">
            <camunda:properties>
              <camunda:property id="multiple" />
              <camunda:property id="min" value="1" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener delegateExpression="${registrationFormListener}" event="create" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0et583m</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_19292vz</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Task_0ged9ns" name="Čuvanje i postavljanje uloge glavnog urednika časopisa" camunda:class="upp.project.services.SaveMagazineService">
      <bpmn:incoming>SequenceFlow_19292vz</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_17g28f6</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="Task_0l9bab8" name="Dodavanje recenzenata i urednika naučne oblasti" camunda:assignee="${process_initiator}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="form_reviewers" label="Reviewers" type="enum">
            <camunda:properties>
              <camunda:property id="multiple" value="true" />
              <camunda:property id="min" value="2" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="form_editors" label="Editors" type="enum">
            <camunda:properties>
              <camunda:property id="multiple" value="true" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener delegateExpression="${magazineFormListener}" event="create" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_17g28f6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_17t33t9</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1ka666o">
      <bpmn:incoming>SequenceFlow_01h8wap</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1ozv75n</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0d4jgkv</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1ozv75n" name="Podaci o časopisu nisu ispravni" sourceRef="ExclusiveGateway_1ka666o" targetRef="UserTask_09c09ul">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${f_act == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0d4jgkv" name="Podaci o časopisu su ispravni" sourceRef="ExclusiveGateway_1ka666o" targetRef="ServiceTask_0t2x4in">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${f_act == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="EndEvent_0i7ihr3">
      <bpmn:incoming>SequenceFlow_112dohx</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="ServiceTask_0t2x4in" name="Čuvanje aktivacije časopisa" camunda:class="upp.project.services.SaveMagazineActivationService">
      <bpmn:incoming>SequenceFlow_0d4jgkv</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_112dohx</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_112dohx" sourceRef="ServiceTask_0t2x4in" targetRef="EndEvent_0i7ihr3" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_1en9vmq">
      <bpmn:incoming>SequenceFlow_1wnnwdi</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1u482wh</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_10hx645</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_10hx645" sourceRef="ExclusiveGateway_1en9vmq" targetRef="UserTask_0rczcmu" />
    <bpmn:userTask id="UserTask_0rczcmu" name="Provera unetih podataka o časopisu i izbor aktivacije časopisa" camunda:assignee="admin">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="form_name" label="Naziv" type="string" defaultValue="${form_name}">
            <camunda:properties>
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="form_issn" label="ISSN" type="string" defaultValue="${form_issn}">
            <camunda:properties>
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="form_payment" label="Način naplate članarine" type="enum" defaultValue="${form_payment}">
            <camunda:properties>
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
            <camunda:value id="readers" name="readers" />
            <camunda:value id="authors" name="authors" />
          </camunda:formField>
          <camunda:formField id="f_act" label="Podaci su ispravni i časopis se aktivira" type="boolean" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_10hx645</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_01h8wap</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_01h8wap" sourceRef="UserTask_0rczcmu" targetRef="ExclusiveGateway_1ka666o" />
    <bpmn:userTask id="UserTask_09c09ul" name="Ispravka podataka o časopisu" camunda:assignee="${process_initiator}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="form_name" label="Naziv" type="string" defaultValue="${form_name}">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="form_issn" label="ISSN" type="string" defaultValue="${form_issn}">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="form_payment" label="Članarina se naplaćuje" type="enum" defaultValue="${form_payment}">
            <camunda:validation>
              <camunda:constraint name="required" />
            </camunda:validation>
            <camunda:value id="readers" name="readers" />
            <camunda:value id="authors" name="authors" />
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1ozv75n</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_081nxoi</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_081nxoi" sourceRef="UserTask_09c09ul" targetRef="ServiceTask_17ei2v3" />
    <bpmn:sequenceFlow id="SequenceFlow_17t33t9" sourceRef="Task_0l9bab8" targetRef="ServiceTask_0om5yfx" />
    <bpmn:serviceTask id="ServiceTask_17ei2v3" name="Čuvanje prepravljenih podataka" camunda:class="upp.project.services.UpdateMagazineService">
      <bpmn:incoming>SequenceFlow_081nxoi</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1wnnwdi</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_1wnnwdi" sourceRef="ServiceTask_17ei2v3" targetRef="ExclusiveGateway_1en9vmq" />
    <bpmn:sequenceFlow id="SequenceFlow_17g28f6" sourceRef="Task_0ged9ns" targetRef="Task_0l9bab8" />
    <bpmn:serviceTask id="ServiceTask_0om5yfx" name="Čuvanje recenzenata i urednika naučnih oblasti" camunda:class="upp.project.services.SaveMagazineUsersService">
      <bpmn:incoming>SequenceFlow_17t33t9</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1u482wh</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_1u482wh" sourceRef="ServiceTask_0om5yfx" targetRef="ExclusiveGateway_1en9vmq" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="adding_new_magazine">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="152" y="259" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0et583m_di" bpmnElement="SequenceFlow_0et583m">
        <di:waypoint x="188" y="277" />
        <di:waypoint x="240" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_19292vz_di" bpmnElement="SequenceFlow_19292vz">
        <di:waypoint x="340" y="277" />
        <di:waypoint x="390" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1ro99ug_di" bpmnElement="Task_1ia85e0">
        <dc:Bounds x="240" y="237" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0c80usi_di" bpmnElement="Task_0ged9ns">
        <dc:Bounds x="390" y="237" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1yep1j2_di" bpmnElement="Task_0l9bab8">
        <dc:Bounds x="540" y="237" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1ka666o_di" bpmnElement="ExclusiveGateway_1ka666o" isMarkerVisible="true">
        <dc:Bounds x="1165" y="252" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1ozv75n_di" bpmnElement="SequenceFlow_1ozv75n">
        <di:waypoint x="1190" y="252" />
        <di:waypoint x="1190" y="110" />
        <di:waypoint x="1150" y="110" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1145" y="186" width="90" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0d4jgkv_di" bpmnElement="SequenceFlow_0d4jgkv">
        <di:waypoint x="1215" y="277" />
        <di:waypoint x="1360" y="277" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1235" y="263" width="90" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_0i7ihr3_di" bpmnElement="EndEvent_0i7ihr3">
        <dc:Bounds x="1512" y="259" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0t2x4in_di" bpmnElement="ServiceTask_0t2x4in">
        <dc:Bounds x="1360" y="237" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_112dohx_di" bpmnElement="SequenceFlow_112dohx">
        <di:waypoint x="1460" y="277" />
        <di:waypoint x="1512" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1en9vmq_di" bpmnElement="ExclusiveGateway_1en9vmq" isMarkerVisible="true">
        <dc:Bounds x="835" y="252" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_10hx645_di" bpmnElement="SequenceFlow_10hx645">
        <di:waypoint x="885" y="277" />
        <di:waypoint x="970" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0rczcmu_di" bpmnElement="UserTask_0rczcmu">
        <dc:Bounds x="970" y="237" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_01h8wap_di" bpmnElement="SequenceFlow_01h8wap">
        <di:waypoint x="1070" y="277" />
        <di:waypoint x="1165" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_09c09ul_di" bpmnElement="UserTask_09c09ul">
        <dc:Bounds x="1050" y="70" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_081nxoi_di" bpmnElement="SequenceFlow_081nxoi">
        <di:waypoint x="1050" y="110" />
        <di:waypoint x="1000" y="110" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_17t33t9_di" bpmnElement="SequenceFlow_17t33t9">
        <di:waypoint x="640" y="277" />
        <di:waypoint x="690" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_17ei2v3_di" bpmnElement="ServiceTask_17ei2v3">
        <dc:Bounds x="900" y="70" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1wnnwdi_di" bpmnElement="SequenceFlow_1wnnwdi">
        <di:waypoint x="900" y="110" />
        <di:waypoint x="860" y="110" />
        <di:waypoint x="860" y="252" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_17g28f6_di" bpmnElement="SequenceFlow_17g28f6">
        <di:waypoint x="490" y="277" />
        <di:waypoint x="540" y="277" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0om5yfx_di" bpmnElement="ServiceTask_0om5yfx">
        <dc:Bounds x="690" y="237" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1u482wh_di" bpmnElement="SequenceFlow_1u482wh">
        <di:waypoint x="790" y="277" />
        <di:waypoint x="835" y="277" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
